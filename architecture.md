```

             CLI                   Controller process         Container process
  (spawn controller processs)         (ephemeral)               (persistent)

                                          ─┬─                         ─┬─
                                           │                           │
          ┌────────┐                  ┌────┴───┐                  ┌────┴─────┐
          │ create ├─────────────────►│ init   ├─────────────────►│ creating │
          └────────┘                  └─┬──┬───┘                  └────┬─────┘
          ┌────────┐                    │  │                           │
          │ reexec │◄───────────────────┘  │                           │
          └───┬────┘                       │                           │
              │                       ┌────┴───┐                  ┌────┴─────┐
              └──────────────────────►│ fork   ├─────────────────►│ created  │
                                      └────┬───┘                  └─┬──┬─────┘
                                      ┌────┴───┐                    │  │
                                      │ save   │◄───────────────────┘  │
                                      └────┬───┘                      ─┴─
                                           │
                                          ─┴─


                                          ─┬─
                                           │
          ┌────────┐                  ┌────┴───┐
          │ start  ├─────────────────►│ load   │                      ─┬─
          └────────┘                  └────┬───┘                       │
                                      ┌────┴───┐                  ┌────┴─────┐
                                      │ start  ├─────────────────►│ running  │
                                      └────┬───┘                  └─┬──┬─────┘
                                      ┌────┴───┐                    │  │
                                      │ save   │◄───────────────────┘  │
                                      └────┬───┘                  ┌────┴─────┐
                                           │                      │ stopped  │
                                           │                      └─┬──┬─────┘
                                      ┌────┴───┐                    │  │
                                      │ save   │◄───────────────────┘  │
                                      └────┬───┘                      ─┴─
                                           │
                                          ─┴─


                                          ─┬─
                                           │
          ┌────────┐                  ┌────┴───┐
          │ state  ├─────────────────►│ load   │
          └────────┘                  └────┬───┘
                                           │
                                          ─┴─


                                          ─┬─
                                           │
          ┌────────┐                  ┌────┴───┐
          │ kill   ├─────────────────►│ load   │                      ─┬─
          └────────┘                  └────┬───┘                       │
                                      ┌────┴───┐                  ┌────┴─────┐
                                      │ kill   ├─────────────────►│ stopped  │
                                      └────┬───┘                  └─┬──┬─────┘
                                      ┌────┴───┐                    │  │
                                      │ update │◄───────────────────┘  │
                                      └────┬───┘                      ─┴─
                                           │
                                          ─┴─


                                          ─┬─
                                           │
          ┌────────┐                  ┌────┴───┐
          │ delete ├─────────────────►│ load   │
          └────────┘                  └────┬───┘
                                      ┌────┴───┐                  ┌──────────┐
                                      │ delete ├─────────────────►│          │
                                      └────┬───┘                  └─┬────────┘
                                      ┌────┴───┐                    │
                                      │ update │◄───────────────────┘
                                      └────┬───┘
                                           │
                                          ─┴─


```
